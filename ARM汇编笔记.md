# ARM汇编笔记
## str指令
- STR指令的格式为：
```STR{条件}  源寄存器，<存储器地址>```
- STR指令用亍从源寄存器中将一个32位的字数据传送到存储器中。该指令在程序设计中比较常用，寻址方式灵活多样，使用方式可参考指令LDR。
- 指令示例：
    ```
    STR R0，[R1]，＃8  ；将R0中的字数据写入以R1为地址的存储器中，并将新地址R1＋8写入R1。
    STR R0，[R1，＃8]  ；将R0中的字数据写入以R1＋8为地址的存储器中。
    str     r1, [r0]  ；将r1寄存器的值，传送到地址值为r0的（存储器）内存中
    ```
- https://blog.csdn.net/assyiran/article/details/71440516
---
<br/>

## tst指令
- TST指令格式为：
```TST{条件}{P}  <op 1>, <op 2>```
- TST 来检查是否设置了特定的位。操作数 1 是要测试的数据字，操作数 2 是一个位掩码，TST指令将操作数1与操作数2做逻辑与运算，和ANDS的区别就是不保存结果。TST会改变CPSR的条件标志位。
- 这个指令通常与EQ，NE这些条件码来组合使用，但是使用过程中需要注意 ：与掩码逻辑与运算之后，全部测试位为0的时候，标志位Z = 1，此时EQ成立，反之则 Z = 0，NE成立。
---
<br/>

## cpsr_c
- ARM每种工作模式除R0~R15共16个寄存器外，还有第17个寄存器CPSR,叫做 当前程序状态寄存器，CPSR中一些位被用于标识各种状态，一些位被用于标识当前出于什么工作模式。
- ![avator](picture/cpsr.png)
- 其中cpsr_c代表的是这32位中的低8位，也就是控制位，当你看到有些程序里这样写 ```msr cpsr_c 0xd2```这样的语句时，就是在更改这8位的状态
---
<br/>

## LDMIA
- LDMIA R0! ,{R3-R9} ; 将R0指向的地址上连续空间的数据，保存到R3-R9当中，!表示R0值更新,IA后缀表示按WORD递增
---
<br/>

## SUBS Rn,Rn,#1
- 意思是 Rn 自身减 1 并设置标志位
---
<br/>

## adr r0， _start
- 将指定地址赋到r0中
---
<br/>

## ORR
- ORR指令的格式为： ORR{条件}{S}  目的寄存器，操作数1，操作数2
- ORR指令用于在两个操作数上进行逻辑或运算，并把结果放置到目的寄存器中。
- 操作数1应是一个寄存器，操作数2可以是一个寄存器，被移位的寄存器，或一个立即数。
- 操作数2为32位的掩码，如果在掩码中置了某一位1，则将这一位置1。未设置的掩码位保持不变。