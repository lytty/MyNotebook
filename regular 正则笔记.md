# 正则表达式学习笔记

## 1. 表达式全集

|    字符    |       描述       |
|:----------|:--------------|
|   \   |   将下一个字符标记为一个特殊字符、或一个原义字符、或一个向后引用、或一个八进制转义符。例如，“n”匹配字符“n”；“\n”匹配一个换行符；“\\\”匹配"\\"; "\\("则匹配“（”
|   ^   |   匹配输入字符串的开始位置, 如果设置了RegExp对象的Multiline属性，^也匹配“\n”或“\r”之后的位置
|   $   |   匹配字符串的结束位置， 如果设置了RegExp对象的Multiline属性，$也匹配“\n”或“\r”之后的位置
|   *   |   匹配前面的子表达式零次或多次。例如， ‘zo*’能匹配‘z’以及‘zoo’。 ‘*’等价于{0，}
|   +   |   匹配前面的子表达式一次或多次。例如， ‘zo+’能匹配‘zo’以及‘zoo’。 ‘+’等价于{1，}
|   ?   |   匹配前面的子表达式零次或一次。例如， ‘do(es)?’能匹配‘does’或‘does’中的‘do’。 ‘？’等价于{0，1}
|   {n} |   n是一个非负整数。匹配确定的n次。例如，‘o{2}’不能匹配‘Bob’中的‘o’，但是能匹配‘food’中的两个o
|   {n，}   |  n是一个非负整数。至少匹配n次。例如，‘o{2，}’不能匹配‘Bob’中的‘o’，但是能匹配‘foooood’中的o， ‘o{1,}’等价于‘o+’，‘o{0,}’等价于‘o*’
|   {n，m}  |  m和n均是非负整数。其中n<=m, 最少匹配n次，最多匹配m次。例如，‘o{1，3}’将匹配“fooooood”中的前三个o。“o{0,1}”等价于“o?”。请注意在逗号和两个数之间不能有空格。
|   ？  |   当该字符紧跟在任何一个其他限制符（*、+、？、{n}、{n，}、{n，m}）后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜素的字符串，而默认的贪婪模式则尽可能多的匹配所搜素的字符串。例如，对与字符串“oooo”，“o+?”将匹配单个“o”，而“o+”将匹配所有“o”。
|   .   |   匹配除“\n”之外的任何单个字符。要匹配包括“\n”在内的任何字符，请使用像“(.|\n)”的模式。
|   （pattern）    |    匹配pattern并获取这一匹配。所获取的匹配可以从产生的Matches集合得到，在VBScript中使用SubMatches集合，在JScript中则使用$0...$9属性。要匹配圆括号字符，请使用“\(”或“\)”。
|   (？：pattern)   |   匹配pattern但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用或字符“（\|）”来组合一个模式的各个部分是很有用。例如“industr（？：y\|ies）”就是一个比“industry\|industries”更简略的表达式
|   (?=pattern）  |   正向肯定预查，在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说该匹配不需要获取供以后使用。例如，“Windows(?=95\|98\|NT\|2000)”能匹配“Windows2000”中的“Windows”，但不能匹配“Windows3.1”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。
|   (?!pattern)    |    正向否定预查，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。例如“Windows(?=95\|98\|NT\|2000)”能匹配“Windows3.1”中的“Windows”，但不能匹配“Windows2000”中的“Windows”。预查不消耗字符，也就是说，在一个匹配发生后，在最后一次匹配之后立即开始下一次匹配的搜索，而不是从包含预查的字符之后开始。
|   (?<=pattern)    |   反向肯定预查，与正向肯定预查类似，只是方向相反。例如，“(?<=95\|98\|NT\|2000)Windows”能匹配“2000Windows”中的“Windows”，但不能匹配“3.1Windows”中的“Windows”。
|   (?<\!pattern)    |   反向否定预查，与正向否定预查类似，只是方向相反。例如，“(?<\!95\|98\|NT\|2000)Windows”能匹配“3.1Windows”中的“Windows”，但不能匹配“2000Windows”中的“Windows”。
|   x\|y    |  匹配x或y。例如，"z\|food“能匹配”z“或”food“。”（z\|f）ood“则匹配”zood“或”food“。
|   [xyz]   |   字符集合。匹配所包含的任意字符。例如，”[abc]“可以匹配”plain“中的”a“。
|   [^xyz]   |  负值字符集合。匹配未包含的任意字符。例如，”[^abc]“可以匹配”plain“中的”p“。
|   [a-z]   |   字符范围。匹配指定范围内的任意字符。例如，”[a-z]“可以匹配”a“到”z“范围内的任意小写字母字符。
|   [^a-z]   |   负值字符范围。匹配任何不再指定范围内的任意字符。例如，”[^a-z]“可以匹配任何不在”a“到”z“范围内的任意字符。
|   \b  |   匹配一个单词边界，也就是指单词和空格的位置。例如，”er\b“可以匹配”never“中的”er“，但不能匹配”verb“中的”er“。
|   \B  |   匹配非单词边界。例如，”er\B“可以匹配”verb“中的”er“，但不能匹配”never“中的”er“。
|   \cx |   匹配由x指明的控制字符。例如，\cM匹配一个Control-M或回车符。x的值必须为A-Z或a-z之一。否则，将c视为一个原义的”c“字符。
|   \d  |   匹配一个数字字符。等价于[0-9]。
|   \D  |   匹配一个非数字字符。等价于[^0-9]。
|   \f  |   匹配一个换页符。等价于\x0c和\cL。
|   \n  |   匹配一个换行符。等价于\x0a和\cJ。
|   \r  |   匹配一个回车符。等价于\x0d和\cM。
|   \s  |   匹配任何空白字符，包括空格、制表符、换页符等等。等价于[\f\n\r\t\v]。
|   \S  |   匹配任何非空白字符。等价于[^\f\n\r\t\v]。
|   \t  |   匹配一个制表符。等价于\x09和\cl。
|   \v  |   匹配一个垂直制表符。等价于\x0b和\cK。
|   \w  |   匹配包括下划线的任何单词字符。等价于”[A-Za-z0-9_]“。
|   \W  |   匹配任何非单词字符。等价于”[^A-Za-z0-9_]“。
|   \Xn  |   匹配n，其中n为十六进制转义值。十六进制转义值必须为确定的两个数字长。例如，“\x41”匹配“A”。“\x041”则等价于“\x04&1”。正则表达式中可以使用ASCII编码。
|   \num  |   匹配num，其中num是一个正整数。对所获取的匹配的引用。例如，”（.）\1“匹配两个连续的相同字符。
|   \n  |   标识一个八进制转义值或一个向后引用。如果\n之前至少n个获取的子表达式，则n为向后引用。否则，如果n为八进制数字（0-7），则n为一个八进制转义值。
|   \nm  |   标识一个八进制转义值或一个向后引用。如果\nm之前至少有nm个获得子表达式，则nm为向后引用。如果\nm之前至少有n个获取，则n为一个后跟文字m的向后引用。如果前面的条件都不满足，若n和m均为八进制数字（0-7），则\nm将匹配八进制转义值nm。
|   \nml  |   如果n为八进制数字（0-3），且m和l均为八进制数字（0-7），则匹配八进制转义值nml。
|   \Un  |   匹配n，其中n是一个用四个十六进制数字表示的Unicode字符。例如，\u00A9匹配版权符号（©）。
---

## 2. 常用正在表达式


|||
|:---------|:--------------|
|   用户名  |	/^[a-z0-9_-]{3,16}$/
|   密码    |	/^[a-z0-9_-]{6,18}$/
|   十六进制值  |	/^#?([a-f0-9]{6}|[a-f0-9]{3})$/
|   电子邮箱    |	/^([a-z0-9_\\.-]+)@([\da-z\\.-]+)\\.([a-z\\.]{2,6})$/  ;  /^[a-z\d]+(\\.[a-z\d]+)*@([\\da-z](-[\da-z])?)+(\\.{1,2}[a-z]+)+$/
|   URL |	/^(https?:\/\/)?([\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\w \\.-]*)*\\/?$/
|   IP 地址 |	/((2[0-4]\\d\|25[0-5]\|[01]?\\d\\d?)\\.){3}(2[0-4]\d\|25[0-5]\|[01]?\d\d?)/; /^(?:(?:25[0-5]\|2[0-4][0-9]\|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]\|2[0-4][0-9]\|[01]?[0-9][0-9]?)$/
|   HTML 标签   |	/^<([a-z]+)([^<]+)*(?:>(.*)<\\/\1>\|\s+\\/>)$/
|   删除代码\\注释  |	(?<\!http:\|\S)//.*$
|   Unicode编码中的汉字范围 |	/^[\u2E80-\u9FFF]+$/

## 3. 择一匹配符号'|'
- at | home : at、home
- r2d2 | c3po : r2d2、c3po
- bat | bet | bit : bat、bet、bit

## 4. 匹配任意单个字符 ‘.’
- 点号或者句点（.）符号匹配除了换行符\n 以外的任何字符（Python 正则表达式有一个编译标记[S 或者DOTALL]，该标记能够推翻这个限制，使点号能够匹配换行符）。无论字母、数字、空格（并不包括“\n”换行符）、可打印字符、不可打印字符，还是一个符号，使用点号都能够匹配它们。
- f.o : 匹配在字母“f”和“o”之间的任意一个字符；例如fao、f9o、f#o 等
- .. : 任意两个字符
- .end : 匹配在字符串end 之前的任意一个字符
- 要显式匹配一个句点符号本身，必须使用反斜线转义句点符号的功能，例如“\\.”

## 5. 从字符串起始或者结尾或者单词边界匹配
- ^From : 任何以From 作为起始的字符串
- /bin/tcsh$ : 任何以/bin/tcsh 作为结尾的字符串
- ^Subject: hi$ : 任何由单独的字符串Subject: hi 构成的字符串
- 特殊字符\b 和\B 可以用来匹配字符边界
    - the : 任何包含the 的字符串
    - \bthe : 任何以the 开始的字符串
    - \bthe\b : 仅仅匹配单词the
    - \Bthe : 任何包含但并不以the 作为起始的字符串

## 6. 创建字符集
- b[aeiu]t ： bat、bet、bit、but
- [cr][23][dp][o2] ： 一个包含四个字符的字符串，第一个字符是“c”或“r”，然后是“2”或“3”，后面是“d”或“p”，最后要么是“o”要么是“2”。例如，c2do、r3p2、r2d2、c3po 等

## 7. 限定范围和否定
- z.[0-9] ： 字母“z”后面跟着任何一个字符，然后跟着一个数字
- [r-u][env-y][us] ： 字母“r”、“s”、“t”或者“u”后面跟着“e”、“n”、“v”、“w”、“x”或者“y”，然后跟着“u”或者“s”
- [^aeiou] ： 一个非元音字符（练习：为什么我们说“非元音”而不是“辅音”？）
- [^\t\n] ： 不匹配制表符或者\n
- [“-a] ：在一个ASCII 系统中，所有字符都位于“ “ ”和“ a ”之间，即34~97 之间

## 8. 使用闭包操作符实现存在性和频数匹配
- 星号或者星号操作符（*）将匹配其左边的正则表达式出现零次或者多次的情况（在计算机编程语言和编译原理中，该操作称为Kleene 闭包）。加号（+）操作符将匹配一次或者多次出现的正则表达式（也叫做正闭包操作符），问号（？）操作符将匹配零次或者一次出现的正则表达式。
- 还有大括号操作符（{}），里面或者是单个值或者是一对由逗号分隔的值。这将最终精确地匹配前面的正则表达式N 次（如果是{N}）或者一定范围的次数
- 如果问号紧跟在任何使用闭合操作符的匹配后面，它将直接要求正则表
达式引擎匹配尽可能少的次数
- [dn]ot? ：字母“d”或者“n”，后面跟着一个“o”，然后是最多一个“t”，例如，do、no、dot、not
- 0?[1-9] ：任何数值数字，它可能前置一个“0”，例如，匹配一系列数（表示从1～9 月的数值），不管是一个还是两个数字
- [0-9]{15,16} ：匹配 15 或者16 个数字（例如信用卡号码）
- </?[^>]+> ：匹配全部有效的（和无效的）HTML 标签
- [KQRBNP][a-h][1-8]-[a-h][1-8] ：在“长代数”标记法中，表示国际象棋合法的棋盘移动（仅移动，不包括吃子和将军）。即“K”、“Q”、“R”、“B”、“N”或“P”等字母后面加上“a1”～“h8”之间的棋盘坐标。前面的坐标表示从哪里开始走棋，后面的坐标代表走到哪个位置（棋格）上

## 9. 表示字符集的特殊字符
- 与使用“0-9”这个范围表示十进制数相比，可以简单地使用d 表示匹配任何十进制数字。另一个特殊字符（\w）能够用于表示全部字母数字的字符集，相当于[A-Za-z0-9_]的缩写形式，\s 可以用来表示空格字符。这些特殊字符的
大写版本表示不匹配；例如，\D 表示任何非十进制数（与[^0-9]相同）
- \w+-\d+ ：一个由字母数字组成的字符串和一串由一个连字符分隔的数字
- [A-Za-z]\w* ：第一个字符是字母；其余字符（如果存在）可以是字母或者数字（几乎等价于Python 中的有效标识符［参见练习］）
- \d{3}-\d{3}-\d{4} ：美国电话号码的格式，前面是区号前缀，例如800-555-1212
- \w+@\w+\.com ：以 XXX@YYY.com 格式表示的简单电子邮件地址

## 10. 使用圆括号指定分组
- 当使用正则表达式时，一对圆括号可以实现以下任意一个（或者两个）功能：
    - 对正则表达式进行分组；
    - 匹配子组。
-\d+(\.\d*)? ：表示简单浮点数的字符串；也就是说，任何十进制数字，后面可以接一个小数点和零个或者多个十进制数字，例如“0.004”、“2”、“75.”等
- (Mr?s?\.)?[A-Z][a-z]*[A-Za-z-]+ ：名字和姓氏，以及对名字的限制（如果有，首字母必须大写，后续字母小写），全名前可以有可选的“Mr.”、“Mrs.”、“Ms.”或者“M.”作为称谓，以及灵活可选的姓氏，可以有多个单词、横线以及大写字母

## 11. 扩展表示法
- 正则表达式的最后一个方面是扩展表示法，它们是以问号开始（?…）
- (?:\w+\.)* ：以句点作为结尾的字符串，例如“google.”、“twitter.”、“facebook.”，但是这些匹配不会保存下来供后续的使用和数据检索
- (?#comment) ：此处并不做匹配，只是作为注释
- (?=.com) ：如果一个字符串后面跟着“.com”才做匹配操作，并不使用任何目标字符串
- (?!.net) ：如果一个字符串后面不是跟着“.net”才做匹配操作
- (?<=800-) ：如果字符串之前为“800-”才做匹配，假定为电话号码，同样，并不使用任何输入字符串
- (?<!192\.168\.) ：如果一个字符串之前不是“192.168.”才做匹配操作，假定用于过滤掉一组C 类IP 地址
- (?(1)y|x) 如果一个匹配组1（\1）存在，就与y 匹配；否则，就与x 匹配